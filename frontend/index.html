<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garagem Dashboard Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        :root {
            --bg-dark: #09090b;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --accent: #6366f1;
            --accent-glow: rgba(99, 102, 241, 0.5);
            --text-main: #ffffff;
            --text-muted: #a1a1aa;
            --success: #10b981;
            --warning: #f59e0b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Outfit', sans-serif; }

        body {
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at top right, #1e1b4b, transparent 40%), radial-gradient(circle at bottom left, #1f1f22, transparent 40%);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 260px;
            background: var(--glass);
            border-right: 1px solid var(--glass-border);
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            backdrop-filter: blur(10px);
            z-index: 10;
            flex-shrink: 0;
        }

        .logo { font-size: 1.5rem; font-weight: 800; display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .logo i { color: var(--accent); font-size: 1.8rem; }

        .menu-item {
            display: flex; align-items: center; gap: 12px; padding: 12px 16px;
            color: var(--text-muted); text-decoration: none; border-radius: 12px;
            transition: 0.3s; font-weight: 500; cursor: pointer; white-space: nowrap;
        }
        .menu-item:hover, .menu-item.active { background: rgba(99, 102, 241, 0.1); color: var(--accent); }

        /* --- MAIN CONTENT --- */
        .main-content { 
            flex: 1; 
            padding: 30px; 
            overflow-y: auto; 
            display: flex; 
            flex-direction: column; 
            gap: 30px; 
            position: relative; 
        }

        /* --- TABS LOGIC --- */
        .tab-section { display: none; animation: fadeIn 0.4s ease; }
        .tab-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- HEADER & STATS --- */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .page-title h2 { font-size: 2rem; font-weight: 600; }
        .page-title p { color: var(--text-muted); }

        .stats-container { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .stat-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01));
            border: 1px solid var(--glass-border); padding: 20px; border-radius: 16px;
        }
        .stat-number { font-size: 2.5rem; font-weight: 700; }
        .stat-label { color: var(--text-muted); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; }

        /* --- LAYOUTS --- */
        .dashboard-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; }
        
        .glass-panel {
            background: var(--glass); border: 1px solid var(--glass-border);
            border-radius: 20px; padding: 25px; height: fit-content;
        }

        /* --- FORM --- */
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; color: var(--text-muted); margin-bottom: 8px; font-size: 0.9rem; }
        input {
            width: 100%; background: rgba(0,0,0,0.3); border: 1px solid var(--glass-border);
            padding: 12px; border-radius: 8px; color: white; outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--accent); box-shadow: 0 0 10px var(--accent-glow); }

        .btn-primary {
            width: 100%; background: var(--accent); color: white; border: none; padding: 14px;
            border-radius: 8px; font-weight: 600; cursor: pointer; transition: 0.3s;
            display: flex; justify-content: center; align-items: center; gap: 8px;
        }
        .btn-primary:hover { background: #4f46e5; transform: translateY(-2px); }

        /* --- CARDS --- */
        .cars-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; }
        .car-card {
            background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border);
            border-radius: 16px; overflow: hidden; transition: 0.3s; position: relative;
        }
        .car-card:hover { transform: translateY(-5px); border-color: var(--accent); }
        .car-img { width: 100%; height: 140px; object-fit: cover; border-bottom: 1px solid var(--glass-border); }
        .card-body { padding: 15px; }
        .car-title { font-weight: 600; font-size: 1.1rem; margin-bottom: 5px; }
        .car-info { display: flex; justify-content: space-between; color: var(--text-muted); font-size: 0.85rem; }
        
        .card-actions {
            position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.7);
            border-radius: 8px; padding: 5px; display: flex; gap: 5px; opacity: 0; transition: 0.2s;
        }
        .car-card:hover .card-actions { opacity: 1; }
        .btn-icon { background: none; border: none; color: white; cursor: pointer; padding: 4px; }
        .btn-icon:hover { color: var(--accent); }

        /* --- GR√ÅFICOS CSS (RELAT√ìRIOS) --- */
        .chart-container { margin-top: 20px; display: flex; align-items: flex-end; gap: 15px; height: 200px; padding-bottom: 10px; border-bottom: 1px solid var(--glass-border); }
        .bar { width: 100%; background: var(--glass-border); border-radius: 8px 8px 0 0; position: relative; transition: height 1s ease; opacity: 0.5; }
        .bar:hover { background: var(--accent); box-shadow: 0 0 15px var(--accent-glow); opacity: 1 !important;}
        .bar::after { content: attr(data-label); position: absolute; bottom: -25px; left: 50%; transform: translateX(-50%); font-size: 0.8rem; color: var(--text-muted); }
        .bar-value { position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-weight: bold; }

        /* --- NOT√çCIAS --- */
        .news-grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 30px; }
        .news-item { display: flex; gap: 15px; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid var(--glass-border); transition: 0.2s; }
        .news-item:hover { transform: translateX(5px); }
        .news-item:last-child { border: none; }
        .news-img { width: 100px; height: 70px; border-radius: 8px; object-fit: cover; }
        .tag { font-size: 0.7rem; color: var(--accent); font-weight: bold; text-transform: uppercase; margin-bottom: 4px; display: block; }

        /* --- FOOTER GLASS FIXED --- */
        .glass-footer {
            margin-top: auto;
        
            margin-left: -30px;
            margin-right: -30px;
            margin-bottom: -30px;
            width: calc(100% + 60px); 
            

            background: rgba(255, 255, 255, 0.05);
            border-top: 1px solid var(--glass-border);
            backdrop-filter: blur(10px);
            
            padding: 20px 30px; 
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .footer-content p { color: var(--text-muted); font-size: 0.95rem; margin: 0; }

        /* Link com Efeito */
        .dev-link {
            color: var(--text-main);
            text-decoration: none;
            font-weight: 600;
            transition: 0.3s;
        }
        .dev-link:hover { color: var(--accent); text-shadow: 0 0 10px var(--accent-glow); }

        /* √çcones Sociais */
        .social-links { display: flex; gap: 15px; }
        .social-links a {
            color: var(--text-muted); font-size: 1.5rem; transition: transform 0.3s, color 0.3s; display: flex; align-items: center; text-decoration: none;
        }
        .social-links a:hover { color: var(--text-main); transform: translateY(-3px); }

        .copyright {
            text-align: center;
            font-size: 0.75rem;
            color: var(--text-muted);
            opacity: 0.6;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            padding-top: 15px;
            margin-top: 5px;
        }

        /* --- MEDIA QUERIES (MOBILE) --- */
        @media (max-width: 768px) {
            body { flexDirection: column; height: auto; overflow-y: auto; }
            .sidebar { width: 100%; padding: 20px; border-right: none; border-bottom: 1px solid var(--glass-border); }
            .sidebar nav { display: flex; overflow-x: auto; gap: 10px; padding-bottom: 5px; }
            .sidebar div[style*="margin-top: auto"] { display: none; }
            .main-content { padding: 20px; overflow: visible; }
            .header { flex-direction: column; align-items: flex-start; gap: 15px; }
            .input-group[style*="width: 300px"] { width: 100% !important; }
            .stats-container, .dashboard-grid, .news-grid, .glass-panel div[style*="grid-template-columns"] { grid-template-columns: 1fr !important; gap: 20px; }
            .glass-panel div[style*="display: flex"] { flex-direction: column; }
            #btnSalvar, #btnCancelar { width: 100% !important; }
            .cars-grid { grid-template-columns: 1fr; }
            
            /* Ajuste Footer Mobile */
            .glass-footer {
                margin-left: -20px;
                margin-right: -20px;
                margin-bottom: -20px;
                width: calc(100% + 40px);
                text-align: center;
            }
            .footer-content { flex-direction: column; gap: 15px; }
        }

    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo">
            <i class="ph ph-steering-wheel"></i>
            Garagem
        </div>
        <nav>
            <div class="menu-item active" onclick="switchTab('dashboard', this)">
                <i class="ph ph-squares-four"></i> Dashboard
            </div>
            <div class="menu-item" onclick="switchTab('inventario', this)">
                <i class="ph ph-car"></i> Invent√°rio
            </div>
            <div class="menu-item" onclick="switchTab('relatorios', this)">
                <i class="ph ph-chart-line"></i> Relat√≥rios
            </div>
            <div class="menu-item" onclick="switchTab('noticias', this)">
                <i class="ph ph-newspaper"></i> Not√≠cias
            </div>
        </nav>
        
        <div style="margin-top: auto; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 12px;">
            <p style="font-size: 0.8rem; color: #a1a1aa;">Sistema v2.0</p>
            <p style="font-weight: 600;">Online üü¢</p>
        </div>
    </div>

    <div class="main-content">
        
        <div class="header">
            <div class="page-title">
                <h2 id="page-title-text">Dashboard</h2>
                <p id="page-desc-text">Vis√£o geral da frota</p>
            </div>
            <div class="input-group" style="width: 300px; margin:0;">
                <input type="text" id="busca" placeholder="Buscar ve√≠culo..." oninput="buscarCarros()">
            </div>
        </div>

        <div id="tab-dashboard" class="tab-section active">
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-number" id="total-carros">0</div>
                    <div class="stat-label">Total de Ve√≠culos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="valor-frota">R$ 0</div>
                    <div class="stat-label">Valor Estimado</div>
                </div>
                <div class="stat-card" style="border-color: var(--success);">
                    <div class="stat-number" style="color: var(--success);">100%</div>
                    <div class="stat-label">Operacional</div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="glass-panel">
                    <h3 style="margin-bottom: 20px;">Cadastrar Novo Ve√≠culo</h3>
                    <input type="hidden" id="idCarro">
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="input-group">
                            <label>Modelo</label>
                            <input type="text" id="modelo" placeholder="Ex: Opala SS">
                        </div>
                        <div class="input-group">
                            <label>Ano</label>
                            <input type="number" id="ano" placeholder="Ex: 1978">
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="input-group">
                            <label>Placa</label>
                            <input type="text" id="placa" placeholder="ABC-1234">
                        </div>
                        <div class="input-group">
                            <label>Foto URL</label>
                            <input type="text" id="imagem" placeholder="http://...">
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn-primary" onclick="salvarOuAtualizar()" id="btnSalvar">
                            <i class="ph ph-plus"></i> Adicionar
                        </button>
                        <button id="btnCancelar" class="btn-primary" onclick="cancelarEdicao()" style="background: #ef4444; width: auto; display: none;">
                            <i class="ph ph-x"></i>
                        </button>
                    </div>
                </div>

                <div class="glass-panel">
                    <h3 style="margin-bottom: 20px;">Destaque R√°pido</h3>
                    <div class="news-item" style="border: none;">
                        <img src="https://images.unsplash.com/photo-1550355291-bbee04a92027?w=150" class="news-img">
                        <div class="news-content">
                            <span class="tag">Sistema</span>
                            <h4>Backend Conectado</h4>
                            <p>API Python rodando perfeitamente na nuvem e pronta para uso.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <h3 style="margin: 30px 0 15px 0;">√öltimas Adi√ß√µes</h3>
            <div id="lista-dashboard" class="cars-grid"></div>
        </div>

        <div id="tab-inventario" class="tab-section">
            <div class="glass-panel" style="min-height: 400px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                    <h3>Invent√°rio Completo</h3>
                    <button class="btn-primary" style="width: auto;" onclick="switchTab('dashboard')"><i class="ph ph-plus"></i> Novo Cadastro</button>
                </div>
                <div id="lista-inventario" class="cars-grid"></div>
            </div>
        </div>

        <div id="tab-relatorios" class="tab-section">
            <div class="glass-panel">
                <h3>Distribui√ß√£o por Ano de Fabrica√ß√£o</h3>
                <p style="color: var(--text-muted); margin-bottom: 30px;">An√°lise visual da frota cadastrada</p>
                
                <div class="chart-container">
                    <div class="bar" style="height: 15%; background: #3b82f6;" data-label="Antigos"><span class="bar-value">0%</span></div>
                    <div class="bar" style="height: 15%; background: #6366f1;" data-label="Cl√°ssicos"><span class="bar-value">0%</span></div>
                    <div class="bar" style="height: 15%; background: #8b5cf6;" data-label="Modernos"><span class="bar-value">0%</span></div>
                    <div class="bar" style="height: 15%; background: #ec4899;" data-label="Futuro"><span class="bar-value">0%</span></div>
                </div>
            </div>
        </div>

        <div id="tab-noticias" class="tab-section">
            <div class="news-grid">
                
                <div class="glass-panel">
                    <h3 style="margin-bottom: 20px;">√öltimas do Setor</h3>
                    <div class="news-item">
                        <img src="https://images.unsplash.com/photo-1472165642271-5cd1acfd6966?w=400" class="news-img">
                        <div>
                            <span class="tag">Mercado</span>
                            <h3>Valores de carros cl√°ssicos disparam</h3>
                            <p>Especialistas apontam que modelos da d√©cada de 70 e 80 s√£o os mais valorizados em 2025.</p>
                        </div>
                    </div>
                    <div class="news-item">
                        <img src="https://plus.unsplash.com/premium_photo-1682141942051-c0a4e4a9073e?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="news-img" class="news-img" class="news-img">
                        <div>
                            <span class="tag">Tecnologia</span>
                            <h3>Manuten√ß√£o Preventiva com IA</h3>
                            <p>Novos softwares ajudam a prever problemas mec√¢nicos antes que eles aconte√ßam.</p>
                        </div>
                    </div>
                    <div class="news-item">
                        <img src="https://plus.unsplash.com/premium_photo-1658527217852-a4fba95fcd66?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="news-img" class="news-img" class="news-img">
                        <div>
                            <span class="tag">Sustentabilidade</span>
                            <h3>Combust√≠veis Sint√©ticos</h3>
                            <p>A nova promessa para manter motores a combust√£o vivos sem poluir o meio ambiente.</p>
                        </div>
                    </div>
                    <div class="news-item">
                        <img src="https://images.unsplash.com/photo-1485291571150-772bcfc10da5?w=400" class="news-img">
                        <div>
                            <span class="tag">Restaura√ß√£o</span>
                            <h3>Pe√ßas impressas em 3D</h3>
                            <p>Como a impress√£o 3D est√° salvando carros antigos que n√£o t√™m mais pe√ßas de reposi√ß√£o.</p>
                        </div>
                    </div>
                </div>

                <div class="glass-panel" style="height: fit-content;">
                    <h3 style="margin-bottom: 20px;">Eventos & Leil√µes</h3>
                    <div class="news-item">
                        <img src="https://images.unsplash.com/photo-1659890061094-d7dd026553a4?w=400" class="news-img">
                        <div>
                            <span class="tag">S√£o Paulo</span>
                            <h4>Encontro de Opala</h4>
                            <p>S√°bado √†s 14h em Interlagos.</p>
                        </div>
                    </div>
                    <div class="news-item">
                        <img src="https://images.unsplash.com/photo-1494976388531-d1058494cdd8?w=400" class="news-img">
                        <div>
                            <span class="tag">Online</span>
                            <h4>Leil√£o Beneficente</h4>
                            <p>Arremate de ve√≠culos raros.</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <footer class="glass-footer">
            <div class="footer-content">
                <p>
                    Desenvolvido por 
                    <a href="https://github.com/edudouraado" target="_blank" class="dev-link">
                        Eduardo Dourado
                    </a>
                </p>
                
                <div class="social-links">
                    <a href="https://github.com/edudouraado" target="_blank" aria-label="GitHub">
                        <i class="ph-fill ph-github-logo"></i>
                    </a>
                    <a href="https://www.linkedin.com/in/eduardodouradosdo/" target="_blank" aria-label="LinkedIn">
                        <i class="ph-fill ph-linkedin-logo"></i>
                    </a>
                    <a href="https://www.instagram.com/edudouraado/" target="_blank" aria-label="Instagram">
                        <i class="ph-fill ph-instagram-logo"></i>
                    </a>
                </div>
            </div>
            
            <div class="copyright">
                &copy; 2025 Garagem Dashboard Pro. Todos os direitos reservados.
            </div>
        </footer>

    </div>

    <script>
        // --- CONFIGURA√á√ÉO ---
        const API_URL = 'https://av3-americo.onrender.com/carros';

        // --- SISTEMA DE ABAS ---
        function switchTab(tabName, element) {
            document.querySelectorAll('.tab-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            
            document.getElementById(`tab-${tabName}`).classList.add('active');
            
            if(element) element.classList.add('active');
            else {
                const menus = document.querySelectorAll('.menu-item');
                if(tabName === 'dashboard') menus[0].classList.add('active');
            }

            const titulos = {
                'dashboard': 'Dashboard',
                'inventario': 'Invent√°rio',
                'relatorios': 'Relat√≥rios & Gr√°ficos',
                'noticias': 'Central de Not√≠cias'
            };
            document.getElementById('page-title-text').innerText = titulos[tabName];
            
            if(tabName === 'inventario') buscarCarros();
        }

        // --- L√ìGICA DO SISTEMA ---
        async function salvarOuAtualizar() {
            const id = document.getElementById('idCarro').value;
            id ? await atualizarCarro(id) : await cadastrarCarro();
        }

        async function cadastrarCarro() {
            const dados = pegarDadosFormulario();
            if (!dados) return;
            await enviarDados(API_URL, 'POST', dados);
        }

        async function atualizarCarro(id) {
            const dados = pegarDadosFormulario();
            if (!dados) return;
            await enviarDados(`${API_URL}/${id}`, 'PUT', dados);
            cancelarEdicao();
        }

        function pegarDadosFormulario() {
            const modelo = document.getElementById('modelo').value;
            const ano = document.getElementById('ano').value;
            const placa = document.getElementById('placa').value;
            const imagem = document.getElementById('imagem').value;
            if (!modelo || !ano || !placa) { alert("Preencha modelo, ano e placa"); return null; }
            return { modelo, ano, placa, imagem };
        }

        async function enviarDados(url, metodo, corpo) {
            const btn = document.getElementById('btnSalvar');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="ph ph-spinner-gap"></i> Processando...';
            btn.disabled = true;

            try {
                const res = await fetch(url, {
                    method: metodo,
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(corpo)
                });
                if (res.ok) { buscarCarros(); limparFormulario(); }
                else { alert("Erro ao salvar. Verifique se o ano √© v√°lido."); }
            } catch (e) { alert("Erro de conex√£o com o servidor."); } 
            finally { 
                btn.innerHTML = originalText; 
                btn.disabled = false; 
            }
        }

        async function buscarCarros() {
            const termo = document.getElementById('busca').value;
            let url = API_URL + (termo ? `?termo=${encodeURIComponent(termo)}` : '');
            
            try {
                const res = await fetch(url);
                const carros = await res.json();
                renderizar(carros);
            } catch (e) { console.log("Erro ao buscar carros:", e); }
        }

        function renderizar(carros) {
            const html = carros.map(c => `
                <div class="car-card">
                    <div class="card-actions">
                        <button class="btn-icon" onclick="editar('${c.id}', '${c.modelo}', '${c.ano}', '${c.placa}', '${c.imagem || ''}')"><i class="ph ph-pencil-simple"></i></button>
                        <button class="btn-icon" style="color:#ef4444" onclick="deletar('${c.id}')"><i class="ph ph-trash"></i></button>
                    </div>
                    <img src="${c.imagem || 'https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?w=500&q=60'}" class="car-img">
                    <div class="card-body">
                        <div class="car-title">${c.modelo}</div>
                        <div class="car-info">
                            <span>${c.ano}</span>
                            <span style="text-transform:uppercase; font-family:monospace;">${c.placa}</span>
                        </div>
                    </div>
                </div>
            `).join('');

            document.getElementById('lista-dashboard').innerHTML = html;
            document.getElementById('lista-inventario').innerHTML = html;
            
            document.getElementById('total-carros').innerText = carros.length;
            document.getElementById('valor-frota').innerText = "R$ " + (carros.length * 45000).toLocaleString();

            atualizarGraficos(carros);
        }

        function editar(id, modelo, ano, placa, imagem) {
            switchTab('dashboard');
            document.getElementById('idCarro').value = id;
            document.getElementById('modelo').value = modelo;
            document.getElementById('ano').value = ano;
            document.getElementById('placa').value = placa;
            document.getElementById('imagem').value = imagem;

            const btn = document.getElementById('btnSalvar');
            btn.innerHTML = '<i class="ph ph-check"></i> Salvar';
            btn.style.background = "#f59e0b";
            document.getElementById('btnCancelar').style.display = 'block';
            
            document.querySelector('.glass-panel').scrollIntoView({ behavior: 'smooth' });
        }

        function cancelarEdicao() {
            limparFormulario();
            const btn = document.getElementById('btnSalvar');
            btn.innerHTML = '<i class="ph ph-plus"></i> Adicionar';
            btn.style.background = "var(--accent)";
            document.getElementById('btnCancelar').style.display = 'none';
        }

        function limparFormulario() {
            ['idCarro','modelo','ano','placa','imagem'].forEach(id => document.getElementById(id).value = '');
        }

        async function deletar(id) {
            if(!confirm("Tem certeza que deseja excluir?")) return;
            await fetch(`${API_URL}/${id}`, { method: 'DELETE' });
            buscarCarros();
        }

        function atualizarGraficos(carros) {
            let antigos = 0;   // < 1990
            let classicos = 0; // 1990 - 2010
            let modernos = 0;  // 2011 - 2020
            let novos = 0;     // > 2020
            
            const total = carros.length;
            if (total === 0) return;

            carros.forEach(c => {
                const ano = parseInt(c.ano);
                if (ano < 1990) antigos++;
                else if (ano <= 2010) classicos++;
                else if (ano <= 2020) modernos++;
                else novos++;
            });

            const bars = document.querySelectorAll('.bar');
            const setBar = (index, qtd) => {
                const porcentagem = Math.round((qtd / total) * 100);
                bars[index].style.height = `${porcentagem < 15 ? 15 : porcentagem}%`; 
                bars[index].querySelector('.bar-value').innerText = `${porcentagem}%`;
                bars[index].style.opacity = porcentagem === 0 ? '0.5' : '1';
            };

            setBar(0, antigos);
            setBar(1, classicos);
            setBar(2, modernos);
            setBar(3, novos);
        }

        buscarCarros();
    </script>
</body>
</html>